{% include 'partials/header.html' %}

<script type="text/javascript">
    function updateDatepicker() {
        $("#date").val(formatDate(activeDate));
    }

    function update() {
        console.log("Render new.");

        updateDatepicker();
    }

    function onDateBeforeClick() {
        activeDate.setDate(activeDate.getDate() - 1);
        update();
    }

    function onDateNextClick() {
        activeDate.setDate(activeDate.getDate() + 1);
        update();
    }

    var activeDate = getNow();

    $(document).ready(function () {
        $("#date-before").click(onDateBeforeClick);
        $("#date-next").click(onDateNextClick);

        // Print the site
        $("#print").click(function () {
            window.print();
        });

        update();
    })
</script>

<main>
    <h3>Vertretungen</h3>

    <div class="row">
        <div class="col s12 m6 l4 xl3">
            <div class="col s2">
                <a class="waves-effect waves-teal btn-flat btn-flat-medium right" id="date-before">
                    <i class="material-icons center">navigate_before</i>
                </a>

            </div>
            <div class="col s8">
                <input type="text" class="datepicker center-align" id="date">
            </div>
            <div class="col s2">
                <a class="waves-effect waves-teal btn-flat btn-flat-medium left" id="date-next">
                    <i class="material-icons center">navigate_next</i>
                </a>
            </div>
        </div>
        <div class="col l4 xl6">
        </div>
        <div class="col s12 m6 l4 xl3 right align-right">
            <a class="waves-effect waves-teal btn-flat btn-flat-medium right" id="print">
                <i class="material-icons center">print</i>
            </a>
        </div>
    </div>

    <p class="flow-text">
        Leider ist der Vertretungsplan noch nicht in Betrieb. Nutzen Sie solange die <a
            href="https://info.katharineum.de/aktuell.pdf">alte Version</a>. Vielen Dank!
    </p>
    {% for sub in subs %}
        <div class="card ">
            <div class="card-content">
                <span class="card-title">9a</span>
                <p>
                    <strong>{{ sub.lesson }}. Stunde</strong>
                    {% if sub.teacher_new %}
                        <s>{{ sub.teacher_old.shortcode }}</s> → <strong>{{ sub.teacher_new.shortcode }}</strong>
                    {% else %}
                        <strong>{{ sub.teacher_old.shortcode }}</strong>
                    {% endif %}
                    ·
                    {% if sub.subject_new %}
                        <s>{{ sub.subject_old.shortcode }}</s> → <strong>{{ sub.subject_new.shortcode }}</strong>
                    {% else %}
                        <strong>{{ sub.subject_old.shortcode }}</strong>
                    {% endif %}
                    ·

                </p>
            </div>

        </div>
        {#        {{ sub.date }}#}
    {% endfor %}
</main>

{% include 'partials/footer.html' %}
