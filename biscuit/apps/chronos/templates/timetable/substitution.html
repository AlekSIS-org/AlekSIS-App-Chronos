{% include 'partials/header.html' %}


<script type="text/javascript">
    var dest = "/timetable/substitutions/";
</script>

<main>
    <h3>Vertretungen</h3>

    <div class="row no-print">
        <div class="col s12 m6 l4 xl3">
            {% include "timetable/datepicker.html" %}
        </div>
        <div class="col l4 xl6">
        </div>
        <div class="col s12 m6 l4 xl3 right align-right">
            <a class="waves-effect waves-teal btn-flat btn-flat-medium right" id="print">
                <i class="material-icons center">print</i>
            </a>
        </div>
    </div>

    <h5>{{ date|date:"l, j. F Y" }}</h5>

    <table class="substitutions striped">
        <thead>
        <tr>
            <th><i class="material-icons">people</i></th>
            <th><i class="material-icons">access_time</i></th>
            <th>Lehrer</th>
            <th>Fach</th>
            <th>Raum</th>
            <th>Hinweis</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        {% for sub in sub_table %}
            <tr class="{{ sub.color }}-text">
                <td>
                    {{ sub.classes }}
                </td>
                <td>
                    <strong>
                        {{ sub.lesson }}
                    </strong>
                </td>
                <td>
                    {% if sub.sub.type == 1 %}
                        <span class="tooltipped" data-position="bottom"
                              data-tooltip="{{ sub.sub.teacher_old.name }}">

                            <s>{{ sub.sub.teacher_old.shortcode }}</s>
                        </span>
                    {% elif sub.sub.teacher_new and sub.sub.teacher_old %}
                        <span class="tooltipped" data-position="bottom"
                              data-tooltip="{{ sub.sub.teacher_old.name }} → {{ sub.sub.teacher_new.name }}">

                            <s>{{ sub.sub.teacher_old.shortcode }}</s> →
                            <strong>{{ sub.sub.teacher_new.shortcode }}</strong>
                        </span>
                    {% elif sub.sub.teacher_new and not sub.sub.teacher_old %}
                        <span class="tooltipped" data-position="bottom"
                              data-tooltip="{{ sub.sub.teacher_new.name }}">

                            <strong>{{ sub.sub.teacher_new.shortcode }}</strong>
                        </span>
                    {% elif sub.sub.teacher_old %}
                        <span class="tooltipped" data-position="bottom"
                              data-tooltip="{{ sub.sub.teacher_old.name }}">

                            <strong>{{ sub.sub.teacher_old.shortcode }}</strong>
                        </span>
                    {% endif %}
                    {#                    <span class="tooltipped" data-position="bottom"#}
                    {#                          data-tooltip="{{ sub.teacher_full|safe }}">{{ sub.teacher|safe }}</span>#}
                </td>
                <td>
                    {% if sub.sub.type == 3 %}
                        <strong>Aufsicht</strong>
                    {% elif not sub.sub.subject_new and not sub.sub.subject_old %}
                    {% elif sub.sub.type == 1 or sub.sub.type == 2 %}
                        <s>{{ sub.sub.subject_old.shortcode }}</s>
                    {% elif sub.sub.subject_new and sub.sub.subject_old %}
                        <s>{{ sub.sub.subject_old.shortcode }}</s> →
                        <strong>{{ sub.sub.subject_new.shortcode }}</strong>
                    {% elif sub.sub.subject_new and not sub.sub.subject_old %}
                        <strong>{{ sub.sub.subject_new.shortcode }}</strong>
                    {% else %}
                        <strong>{{ sub.sub.subject_old.shortcode }}</strong>
                    {% endif %}
                    {#                    {{ sub.subject|safe }}#}
                </td>
                <td>
                    {% if sub.sub.type == 3 %}
                        {# Supervisement #}
                        {{ sub.sub.corridor.name }}
                    {% elif sub.sub.type == 1 or sub.sub.type == 2 %}
                        {# Canceled lesson: no room #}
                    {% elif sub.sub.roow_new and sub.sub.room_old %}
                        {# New and old room available #}
                        <span class="tooltipped" data-position="bottom"
                              data-tooltip="{{ sub.sub.room_old.name }} → {{ sub.sub.room_new.name }}">
                            <s>{{ sub.sub.room_old.shortcode }}</s> → <strong>{{ sub.sub.room_new.shortcode }}</strong>
                        </span>
                    {% elif sub.sub.room_new and not sub.sub.room_old %}
                        {# Only new room available #}
                        <span class="tooltipped" data-position="bottom"
                              data-tooltip="{{ sub.sub.room_new.name }}">
                            {{ sub.sub.room_new.shortcode }}
                        </span>
                    {% elif not sub.sub.room_new and not sub.sub.room_old %}
                        {# Nothing to view #}
                    {% else %}
                        {# Only old room available #}
                        <span class="tooltipped" data-position="bottom"
                              data-tooltip="{{ sub.sub.room_old.name }}">
                            {{ sub.sub.room_old.shortcode }}
                        </span>
                    {% endif %}
                    {#                    <span class="tooltipped" data-position="bottom"#}
                    {#                          data-tooltip="{{ sub.sub.room }}">#}
                    {#                        {{ sub.sub.room }}#}
                    {#                    </span>#}
                </td>
                <td>
                    {% if sub.badge %}
                        <span class="badge new green hide-on-med-and-up">{{ sub.badge }}</span>
                    {% endif %}
                    <em>{{ sub.text|default:"" }}</em>
                </td>
                <td class="hide-on-small-and-down">

                    {% if sub.badge %}
                        <span class="badge new green darken-2">{{ sub.badge }}</span>
                    {% endif %}

                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

</main>

{% include 'partials/footer.html' %}
