{% extends 'core/base.html' %}

{% load i18n static %}

{% block extra_head %}
  <link rel="stylesheet" href="{% static 'css/chronos/timetable.css' %}">
{% endblock %}

{% block browser_title %}{% blocktrans %}Substitutions{% endblocktrans %}{% endblock %}
{% block no_page_title %}{% endblock %}

{% block content %}
  <div class="row no-margin">
    <div class="col s10 m6 no-padding">
      <h4>{% trans "Substitutions" %}</h4>
    </div>
    <div class="col s2 m6 right align-right print-icon">
      {#            <a class="waves-effect waves-teal btn-flat btn-flat-medium right"#}
      {#               href="#}
      {#                    {% if debug %}#}
      {#                        {% url "timetable_substitutions_pdf_date" date|date:"Y-m-d" %}#}
      {#                    {% else %}#}
      {#                       {% url "timetable_substitutions_pdf" %}#}
      {#                    {% endif %}#}
      {#                    ">#}
      {#                <i class="material-icons center">print</i>#}
      {#            </a>#}
    </div>
  </div>

  <div class="row no-print">
    <div class="col s12 m6 l8">
      {% if header_info.is_box_needed %}
        <div class="card">
          <div class="card-content">
            {% for row in header_info.rows %}
              <div class="row no-margin">
                <div class="col s3">
                  <strong class="truncate">{{ row.0 }}</strong>
                </div>
                <div class="col s9">
                  {{ row.1 }}
                </div>
              </div>
            {% endfor %}
          </div>
        </div>
      {% endif %}

      {#            {% include "chronos/hintsinsub.html" %}#}
    </div>
    <div class="col s12 m6 l4 no-padding">
      {% include "chronos/partials/datepicker.html" %}
    </div>
  </div>

  <h5 class="hide-on-small-and-down">{{ day|date:"l" }}, {{ day }}</h5>

  <table class="substitutions striped responsive-table">
    <thead>
    <tr>
      <th><i class="material-icons">people</i></th>
      <th><i class="material-icons">access_time</i></th>
      <th>{% trans "Teacher" %}</th>
      <th>{% trans "Subject" %}</th>
      <th>{% trans "Room" %}</th>
      <th>{% trans "Notes" %}</th>
      <th></th>
    </tr>
    </thead>
    <tbody>
    {% if not substitutions %}
      <td colspan="7">
        <p class="flow-text center">
          {% blocktrans %}No substitutions available.{% endblocktrans %}
        </p>
      </td>
    {% endif %}
    {% for sub in substitutions %}
      <tr class="{% if sub.type_ == "cancellation" %}green-text{% else %}black-text{% endif %}"> {# TODO: Extend support for blue and purple (supervisions and events) #}
        <td>
          {% include "chronos/partials/groups.html" with groups=sub.lesson_period.lesson.groups.all %}
        </td>
        <td>
          <strong>
            {{ sub.lesson_period.period.period }}.
          </strong>
        </td>
        <td>
          {% include "chronos/partials/subs/teachers.html" %}
        </td>
        <td>
          {% include "chronos/partials/subs/subject.html" %}
        </td>
        <td>
          {% include "chronos/partials/subs/room.html" %}
        </td>
        <td>
          {% if sub.badge %}
            <span class="badge new green hide-on-med-and-up">{{ sub.badge }}</span>
          {% endif %}
          <em>{{ sub.text|default:"" }}</em>
        </td>
        <td class="hide-on-small-and-down">
          {% if sub.badge %}
            <span class="badge new green darken-2">{{ sub.badge }}</span>
          {% endif %}
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>

{% endblock %}


